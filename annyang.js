// Get full file from:
// https://raw.githubusercontent.com/TalAter/annyang/master/annyang.js
// Minified version:
(function(w){var L=function(){function t(t,e){return t<e}function e(t,e){return t<=e}function n(t){return function(){return t}}function i(t){return t}function o(t){return"string"==typeof t}function r(t){return"number"==typeof t}function s(t){return"function"==typeof t}function a(t){return null!=t}function c(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return t.toLowerCase()}function h(t){return t.toUpperCase()}function l(t){return Array.isArray(t)}function d(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function f(t){return t.replace(/\s+/g,"\\s+")}function p(t){return u(t)}function g(t){return t.replace(/\\s\+/g,"\\s+").replace(/([^\\])\*/g,"$1.*")}function m(t){return t.replace(/(?:^|\s)\\\S/g,h)}function y(t){var e=[];return t.replace(/(?:\\(.))|(?:\*)|(?:\$(\d+))|(?:#(\.\d+))|(?:\|)|(?:\[(.+?)\])/g,function(t,n,i,o,r,s){return n?e.push({type:"char",value:n}):i?e.push({type:"any",value:i}):o?e.push({type:"num",value:parseInt(o,10)}):r?e.push({type:"float",value:r}):s?e.push({type:"alt",value:s.split("|")}):void 0}),e}function v(t,e){var n=[];return t.forEach(function(t){var i=y(t);n.push({original:t,tokens:i})}),n}function b(t,e){var n=[];return t.forEach(function(t){var i=[];t.tokens.forEach(function(t){"alt"===t.type?i.push("(?: "+t.value.map(d).join(" | ")+" )"):"any"===t.type?i.push("(.*)"):"num"===t.type?i.push("(\\d+)"):"float"===t.type?i.push("([+-]?\\d*\\.?\\d+)"):i.push(d(t.value))}),n.push(new RegExp("^"+i.join("")+"$","i"))}),n}function _(t,e){for(var n=[],i=0;i<t.length;i++){var o=t[i],r=e[i],s=r.exec(o);if(!s)return null;n.push(s.slice(1))}return n}function w(t,e){var n=v([t]),i=b(n,e);return i[0]}function k(t,e){var n=v(t),i=b(n,e);return function(t){return _(t,i)}}function x(t,e){var n=[];return t.forEach(function(t){var i=[];t.tokens.forEach(function(t){"alt"===t.type?i.push("(?: "+t.value.map(f).join(" | ")+" )"):i.push(f(t.value))}),n.push(new RegExp("^"+i.join("")+"$","i"))}),n}function C(t,e){for(var n=[],i=0;i<t.length;i++){var o=t[i],r=e[i],s=o.match(r);if(!s)return null;n.push(s[0])}return n}function S(t,e){var n=v([t]),i=x(n,e);return i[0]}function E(t,e){var n=v(t),i=x(n,e);return function(t){return C(t,i)}}function T(t,e){return t===e}function A(t,e){return t!==e}function I(t,e){return t>e}function O(t,e){return t>=e}function P(t,e){return t in e}function N(t,e){return t instanceof e}function D(t){var e={};return t.forEach(function(t){e[t.original]=t.tokens}),e}function M(t){var e={};return t.forEach(function(t){e[t.original]=t.regex}),e}function R(t,e,n){this.command=t,this.callback=e,this.originalPhrase=n}R.prototype.execute=function(t){return this.callback.apply(null,t)},R.prototype.toString=function(){return this.originalPhrase};var F=function(){function t(t){this.debug=!1,this.autoRestart=!0,this.continuous=!1,this.soundex=!1,this.commands={},this.pause=!1,this.isListening=!1,this.speechRecognizer=null,this.speechRecognition=t||w.SpeechRecognition||w.webkitSpeechRecognition||w.mozSpeechRecognition||w.msSpeechRecognition||w.oSpeechRecognition}return t.prototype.init=function(){if(!this.speechRecognition)throw new Error("annyang: Speech Recognition not available");this.speechRecognizer=new this.speechRecognition,this.speechRecognizer.continuous=this.continuous,this.speechRecognizer.interimResults=!1,this.speechRecognizer.onresult=this.processRecognizerResult.bind(this),this.speechRecognizer.onerror=this.processRecognizerError.bind(this)},t.prototype.addCommands=function(t){var e=this;Object.keys(t).forEach(function(n){var i=t[n];if(o(n))e.addCommand(n,i);else{if(!l(n))throw new Error("annyang: addCommands: command must be a string or an array of strings");n.forEach(function(t){e.addCommand(t,i)})}})},t.prototype.addCommand=function(t,e){if(!o(t))throw new Error("annyang: addCommand: first argument must be a string");if(!s(e))throw new Error("annyang: addCommand: second argument must be a function");var n=p(t),i=new R(e,n,t);this.commands[n]||(this.commands[n]=[]),this.commands[n].push(i),this.debug&&console.log("annyang: added command: %c"+t,"color: #00f")},t.prototype.removeCommands=function(t){var e=this;if(void 0===t)this.commands={},this.debug&&console.log("annyang: cleared all commands");else if(o(t)){var n=p(t);delete this.commands[n],this.debug&&console.log("annyang: removed command: %c"+t,"color: #f00")}else if(l(t))t.forEach(function(t){e.removeCommands(t)});else{if(!a(t))throw new Error("annyang: removeCommands: command must be a string, array of strings, or undefined");Object.keys(this.commands).forEach(function(e){var n=!0;t.forEach(function(t){n=n&&-1!==e.indexOf(p(t))}),n&&delete this.commands[e]})}},t.prototype.start=function(t){var e=this;if(this.pause=!1,!this.isListening){if(t&&(this.autoRestart=t.autoRestart,this.continuous=t.continuous),this.speechRecognizer||this.init(),this.speechRecognizer.start(),this.isListening=!0,this.debug){console.log("annyang: started");var n=Object.keys(this.commands);n.length?n.forEach(function(t){console.log("annyang: commands loaded: %c"+t,"color: #0a0")}):console.log("annyang: no commands loaded")}w.setTimeout(function(){e.speechRecognizer&&e.isListening&&e.speechRecognizer.start()},1e3)}},t.prototype.abort=function(){this.pause=!1,this.isListening&&(this.speechRecognizer.abort(),this.isListening=!1,this.debug&&console.log("annyang: aborted"))},t.prototype.pause=function(){this.pause=!0,this.isListening&&(this.speechRecognizer.abort(),this.isListening=!1,this.debug&&console.log("annyang: paused"))},t.prototype.resume=function(){this.pause=!1,this.start()},t.prototype.isListening=function(){return this.isListening},t.prototype.trigger=function(t,e){if(!o(t))throw new Error("annyang: trigger: first argument must be a string");var n=p(t),i=this.commands[n];if(i){var r=[];i.forEach(function(t){var i=t.execute(e);a(i)&&r.push(i)});var s=r.length>0?r[0]:void 0;return this.debug&&console.log('annyang: command triggered: %c"'+t+'"',"color: #00a"),s}},t.prototype.processRecognizerResult=function(t){var e=this,n=t.results[t.resultIndex],i=n[0].transcript.trim();if(this.debug&&console.log('annyang: speech recognized: %c"'+i+'"',"color: #00a"),!this.pause){var o=u(i),r=Object.keys(this.commands).filter(function(t){return o.match(w(t))});if(r.length>0){var s=r[0],a=o.match(w(s)),c=this.commands[s];if(c){var h=[];c.forEach(function(t){var e=t.execute(a.slice(1));a(e)&&h.push(e)});var l=h.length>0?h[0]:void 0;this.debug&&console.log('annyang: command matched: %c"'+s+'"',"color: #0a0"),this.callback("resultMatch",i,c[0],a.slice(1)),this.callback("result",[i])}else this.debug&&console.log("annyang: no commands matched")}else this.debug&&console.log("annyang: no commands matched")}this.autoRestart&&this.speechRecognizer&&(w.setTimeout(function(){e.speechRecognizer.start()},1e3),this.debug&&console.log("annyang: auto restarted"))},t.prototype.processRecognizerError=function(t){switch(t.error){case"no-speech":case"audio-capture":case"not-allowed":this.debug&&console.log("annyang: speech recognition error: "+t.error),this.callback("error",t);break;default:this.debug&&console.log("annyang: speech recognition error: "+t.error),this.callback("error",t)}},t.prototype.addCallback=function(t,e,n){if(!o(t))throw new Error("annyang: addCallback: first argument must be a string");if(!s(e))throw new Error("annyang: addCallback: second argument must be a function");this["on"+t]=e.bind(n||this)},t.prototype.removeCallback=function(t){if(!o(t))throw new Error("annyang: removeCallback: argument must be a string");this["on"+t]=null},t.prototype.getSpeechRecognizer=function(){return this.speechRecognizer},t.prototype.setLanguage=function(t){this.speechRecognizer.lang=t},t}();return F}();
//# sourceMappingURL=annyang.min.js.map